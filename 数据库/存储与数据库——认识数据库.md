# 认识存储与数据库

## 数据从产生、流动到持久化的全生命周期

### 已注册用户为例

1. 一个用户注册了一个账号......（数据从无到有的产生）
2. 从客户端传递向后端服务器
3. 从服务器传递给数据库（带有记忆属性的数据需要进行持久化）
4. 其他系统进行数据处理...

### 数据库操作

1. 校验数据合法性
2. 修改内容（使用高效的数据组织结构）
3. 写入存储介质（考虑存储设备寿命&选择对硬件存储持久性友好的读写方式）

### 数据库遇到的潜在问题

1. 如何保证数据不丢
2. 如何保证多人修改
3. 除了数据库之外的别的存储系统
4. 数据库只能处理结构化数据吗？
5. 有哪些操作数据库的方式（编程语言&工具）

## 存储&数据库基础知识

### 什么是存储系统

一个提供了**读写、控制类接口，能够安全有效地吧数据持久化**的软件，就称之为存储系统

### 存储系统的特点

处理数据库时，需要关注用户、介质、内容和网络（分布式存储&多机场景下计算逻辑）

1. 作为后端软件的关键组件，性能敏感
2. 作为软件架构中的一环，又很容易受硬件的影响
3. 存储系统的代码，既“简单”（针对io路径上）又“复杂”（错误处理以及非io逻辑）

### 存储器的层级结构

从上倒下为正金字塔分布

1. 极小的容量下支持超高性能的访问
2. ......（有没有兼顾持久化和性能的方式呢？）
3. 极大的容量但是低性能，不友好读写方式

### 数据从应用到存储介质的注意点

1. **缓存**很重要，应当贯穿整个存储系统（比如硬件需要的读写大小方式和软件设计的读写大小方式不一样）
2. **拷贝**很昂贵，应该尽量减少（拷贝消耗CPU）
3. 硬件设备五花八门，需要抽象统一的接入层（硬件设备变化了，保证软件设备不会改变）

### RAID技术

单机系统如何做到高性能、高性价比、高可靠性？

**基于以下几个背景**

1. 单块大容量磁盘价格>多块小容量磁盘
2. 单块磁盘的写入性能<多块磁盘的并发写入性能
3. 单块磁盘的容错能力有限，不够安全

**R**(redundant)**A**(array)**I**(inexpensive)**D**(disks)

1. **RAID0:** 多块磁盘简单组合，使用数据条带化存储 没有额外容错设计
2. **RAID1:** 一块硬盘对应一块镜像磁盘，真实空间利用了只有50%（针对容错）
3. **RAID 0+1:** 先用READ1/0相连 之后用READ0/1连接上一步组成的模块

### 数据库

首先了解一下下面三个概念

1. **什么是“关系模型”：** 关系=集合=任意元素组成的若干有序偶对，反映了事物间的关系。关系代数
2. 关系代数=对关系作运算的抽象查询语言
3. SQL=一种DSL(领域专用语言)=方便人阅读的关系代数表达形式

#### 关系型数据库

是一种存储系统，有一下三个特点

1. 对结构化数据友好（为结构化数据而生）
2. 支持事务（ACID特性）
3. 支持复杂的查询语句

#### 非关系型数据库

是一种存储系统，一般不要求严格的结构化

1. 对半结构化数据友好
2. 可能支持事务
3. 可能支持复杂查询语句

## 存储&数据库主流产品

数据库VS经典存储——结构化数据管理



## 新技术演进