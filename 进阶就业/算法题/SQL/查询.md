# SQL查询语句知识点总结

## 1. 基础查询结构

```sql
SELECT 列名1, 列名2, ...
FROM 表名
[WHERE 条件]
[GROUP BY 分组列]
[HAVING 分组条件]
[ORDER BY 排序列 [ASC|DESC]]
[LIMIT 数量];
```

## 2. SELECT子句

- 选择要查询的列：`SELECT column1, column2`
- 使用通配符选择所有列：`SELECT *`
- 使用别名：`SELECT column AS alias`
- 计算列：`SELECT price*quantity AS total`

## 3. WHERE子句（条件过滤）

- 基本比较：`=`, `<>`/`!=`, `>`, `<`, `>=`, `<=`
- 范围条件：
  - `BETWEEN ... AND ...`
  - `IN (值1, 值2, ...)`
- 模糊匹配：`LIKE`（`%`匹配任意字符，`_`匹配单个字符）
- 逻辑运算符：`AND`, `OR`, `NOT`
- NULL值判断：`IS NULL`, `IS NOT NULL`

## 4. 聚合函数与GROUP BY

- 常用聚合函数：`COUNT()`, `SUM()`, `AVG()`, `MAX()`, `MIN()`
- 分组统计：`GROUP BY column`
- 分组后过滤：`HAVING condition`（与WHERE的区别是HAVING在分组后过滤）

## 5. 排序与限制

- 排序：`ORDER BY column [ASC|DESC]`
- 多列排序：`ORDER BY col1 DESC, col2 ASC`
- 限制结果数量：`LIMIT n`（或`LIMIT offset, count`）

## 6. 连接查询

- 内连接：`INNER JOIN`（或简写为`JOIN`）
- 左外连接：`LEFT JOIN`
- 右外连接：`RIGHT JOIN`
- 全外连接：`FULL JOIN`（MySQL不支持）
- 交叉连接：`CROSS JOIN`
- 自连接：表与自身连接

## 7. 子查询

- WHERE子句中的子查询：`WHERE column IN (SELECT ...)`
- FROM子句中的子查询：`FROM (SELECT ...) AS alias`
- SELECT子句中的子查询：`SELECT (SELECT ...) AS column`

## 8. 常用函数

- 字符串函数：`CONCAT()`, `SUBSTRING()`, `LENGTH()`, `UPPER()`, `LOWER()`
- 数值函数：`ROUND()`, `CEIL()`, `FLOOR()`, `ABS()`
- 日期函数：`NOW()`, `CURDATE()`, `DATE_FORMAT()`, `DATEDIFF()`
- 条件函数：`CASE WHEN ... THEN ... ELSE ... END`, `IF()`, `COALESCE()`

## 9. 集合操作

- 并集：`UNION`（去重）和`UNION ALL`（不去重）
- 交集：`INTERSECT`（MySQL不支持）
- 差集：`EXCEPT`/`MINUS`（MySQL不支持）

## 10. 数据修改语句

- 插入数据：`INSERT INTO table VALUES (...)`
- 更新数据：`UPDATE table SET column=value WHERE ...`
- 删除数据：`DELETE FROM table WHERE ...`

## 11. 其他高级特性

- 窗口函数：`ROW_NUMBER()`, `RANK()`, `DENSE_RANK()`, `LEAD()`, `LAG()`
- 公用表表达式(CTE)：`WITH cte_name AS (SELECT ...)`
- 索引提示：`USE INDEX`, `FORCE INDEX`（MySQL特有）

## 12. 性能优化要点

- 避免使用`SELECT *`，只选择需要的列
- 为常用查询条件创建索引
- 注意JOIN操作的性能影响
- 合理使用EXPLAIN分析查询计划

# 可回收且低脂的产品

```sql
SELECT product_id
FROM Products
WHERE low_fats = 'Y' AND recyclable = 'Y';
```

## 解释

这个SQL查询解决的问题是找出同时满足两个条件的产品：

1. 低脂产品（low_fats = 'Y'）
2. 可回收产品（recyclable = 'Y'）

查询逻辑：

- 从Products表中选择数据
- 使用WHERE子句筛选同时满足两个条件的产品
- 只返回这些产品的product_id列



# 寻找用户推荐人





# 大的国家



# 文章浏览 I





# 无效的推文